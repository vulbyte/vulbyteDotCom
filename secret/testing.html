<!DOCTYPE html>
<html lang="en">

<head>
	<script src="/client_management.js" type="module"></script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>

<script>
	//window.jwt = require('jsonwebtoken');
</script>

<body>
	<!-- inputs for fixed footer -->
	<div style="
			background-color:black;
			color:black;
			display:grid;
			grid-template-columns: repeat(auto-fit, minmax(12em, 1fr));
			padding-bottom:1em;
			position:fixed; 
			bottom:0px;
			left:0px;
			width:100%;
		">
		<div style="display:inline-flex; flex-direction:column;max-width:12em;">
			<div style="">
				<label>un</label>
				<input type="text" value="testUsername">
			</div>
			<div>
				<label>pw</label>
				<input type="text" value="testPassword">
			</div>
		</div>
		<div style="
			/* Establish the container as a flex column */
				display: flex;
				flex-direction: column;

				/* Must have a defined height for the elements inside to fill it 
				height: 300px;
				width: 200px; Example size */
				border: 1px solid black;
			">
			<label>payload</label>
			<div style="display:flex; flex-direction:column; height:100%; width:100%;">
				<textarea id="payload" style="flex-grow:1; width:100%;">{}</textarea>
				<output id="plValidation" style="color:green; height:1.4em; width:100%;">is valid</output>
				<script type="module">
					window.onload = () => {
						let pl = document.getElementById('payload');
						let plv = document.getElementById("plValidation");
						pl.addEventListener("change", (e) => {
							try {
								JSON.parse(pl.value);
								console.log("pl json valid");
								plv.innerText = "pl valid";
								plv.style.color = "green";
							}
							catch (err) {
								plv.style.color = "red";
								plv.innerText = "pl invalid";
								console.log(`pl json invalid: ${err}`);
							}
						});
					};
				</script>
			</div>
		</div>
		<div>
			<label>client jwt</label>
			<output style="width:100%; height:100%; overflow:scroll;">no jwt info yet</output>
		</div>
		<div>
			<label>server jwt</label>
			<output style="width:100%; height:100%; overflow:scroll;">no jwt info yet</output>
		</div>
		<div>
			<div>
				<label>network status:</label>
				<output style="width:100%; height:100%; overflow:scroll;">no out</output>
			</div>
			<div>
				<label>network info:</label>
				<output style="width:100%; height:100%; overflow:scroll;">no out</output>
			</div>
		</div>

	</div>
	<h1>api tests</h1>
	<div>
		<h2>request without auth</h2>
		<style>
			#client-server_boundary {
				width: 60em;
				max-width: 100%;
			}

			#client-server_boundary>tbody>tr>td:nth-child(1) {
				background-color: #ff000022;
			}

			#client-server_boundary>tbody>tr>td:nth-child(2) {
				background-color: #0000ff22;
				font-size: 2em;
				text-align: center;
			}

			#client-server_boundary>tbody>tr>td:nth-child(3) {
				background-color: #00ff0022;
			}
		</style>
		<table id="client-server_boundary">
			<tbody>
				<tr>
					<th>
						client
					</th>
					<th>
						boundary
					</th>
					<th>
						server
					</th>
				</tr>
				<tr>
					<td>
						<div style="display:flex;">
							<div>
								<button>request auth</button><br>
								<div style="display:flex;justify-content:space-between;">
									<div>
										<label>status:</label>
										<output>null</output>
									</div>
									<div>
										<label>state:</label>
										<output>null</output>
									</div>
								</div>
							</div>
						</div>
					</td>
					<td>
						<p>ðŸ‘‰</p>
					</td>
					<td>
						<div>
							<button>verify auth</button><br>
							<label>status:</label>
							<output>null</output>
						</div>
					</td>
				</tr>
				<tr>
					<td>
						<p>response:</p>
						<div>
							<label>network status:</label>
							<output style="width:100%; height:100%; overflow:scroll;">no out</output>
						</div>
						<div>
							<label>network info:</label>
							<output style="width:100%; height:100%; overflow:scroll;">no out</output>
						</div>
					</td>
					<td>ðŸ‘ˆ</td>
					<td>
						if valid: send 400 && send auth code to email<br>
						else: return 400
					</td>
				</tr>
			</tbody>
		</table>
		<div>
			<button>send email with code</button>
			<button>save to local</button>
		</div>
	</div>


</body>

</html>
