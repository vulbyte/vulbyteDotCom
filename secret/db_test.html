<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script type='module' src='/client_management.js'></script>
	<meta http-equiv="Content-Security-Policy"
		content="script-src 'self' 'unsafe-inline' https://y5ydfohzi4.execute-api.us-east-2.amazonaws.com;">
	<title>db_test | vulbyte</title>
</head>

<body>
	<br><br><br>
	<h1>db_test</h1>
	<label>apikey</label>
	<input id="apikey" type="text">
	<br>
	<button id='err'>err</button>
	<output id='err_out'></output>
	<script type='module'>
		const url_err = 'https://r5ryvrxcpl5niu23l4ilvkz7cm0ptaai.lambda-url.us-east-2.on.aws/'
		let apikey = () => {
			return (document.getElementById('apikey').value)
		};
		//{{{2
		const err = document.getElementById('err');
		const err_out = document.getElementById('err_out');
		err.addEventListener('click', async (e) => {
			await fetch(url_err, {
				method: 'GET',
			}
			) // Fetch the URL
				.then(response => {
					if (!response.ok) {
						throw new Error(`HTTP error! Status: ${response.status}`);
					}
					return response.json(); // Parse the response as JSON
				})
				.then(data => {
					console.log(data); // Log the parsed JSON data
					err_out.innerText = data.message; // Access the `message` property
				})
				.catch(err => {
					console.error('Fetch error:', err); // Log the error
					err_out.innerText = String('local error: ' + err); // Display the error
				});
		});
	//}}}2
	</script>
	<button id='get'>get</button>
	<output id='get_out'></output>
	<script type='module'>
		const url = 'https://r5ryvrxcpl5niu23l4ilvkz7cm0ptaai.lambda-url.us-east-2.on.aws/'
		//{{{2
		const get = document.getElementById('get');
		const get_out = document.getElementById('get_out');
		get.addEventListener('click', async (e) => {
			await fetch(url, {
				method: 'GET',
			}
			) // Fetch the URL
				.then(response => {
					if (!response.ok) {
						throw new Error(`HTTP error! Status: ${response.status}`);
					}
					return response.json(); // Parse the response as JSON
				})
				.then(data => {
					console.log(data); // Log the parsed JSON data
					get_out.innerText = data.message; // Access the `message` property
				})
				.catch(err => {
					console.error('Fetch error:', err); // Log the error
					get_out.innerText = String('local error: ' + err); // Display the error
				});
		});
	//}}}2
	</script>

	<br>

	<div>
		<button id='post'>post</button>
		<output id='post_out'></output>
		<script type='module'>
			const url2 = 'https://r5ryvrxcpl5niu23l4ilvkz7cm0ptaai.lambda-url.us-east-2.on.aws/'
			//let apikey = 'PjxIUuNlN17h0Zd9u2cPQ94nqWeaYGi83fVrzsdp'
			//{{{2
			const post = document.getElementById('post');
			const post_out = document.getElementById('post_out');


			post.addEventListener('click', async (e) => {
				await fetch(url2, {
					method: 'POST',
					body: JSON.stringify({"method": "post", "WEEEEEE": "WOOOOOOO"})
				}
				) // Fetch the URL
					.then(response => {
						if (!response.ok) {
							throw new Error(`HTTP error! Status: ${response.status}`);
						}
						return response.json(); // Parse the response as JSON
					})
					.then(data => {
						console.log(data); // Log the parsed JSON data
						post_out.innerText = data.message; // Access the `message` property
					})
					.catch(err => {
						console.error('Fetch error:', err); // Log the error
						post_out.innerText = String('local error: ' + err); // Display the error
					});
			});
	//}}}2
		</script>
	</div>
	<div>
		<button id="test_jwt">TEST_JWT</button>
		<code id="jwt_out"></code>
		<script>
			let test = document.getElementById("test_jwt");
			const url3 = 'https://mxlnbnqnwyotgobsuaet.supabase.co/functions/v1/database-access';

			test.addEventListener('click', async (e) => {
				await fetch(url3, {
					method: 'post',
					body: JSON.stringify({
						"method": "JWT_TEST",
						"WEEEEEE": "WOOOOOOO"
					})
				}
				) // Fetch the URL
					.then(response => {
						if (!response.ok) {
							throw new Error(`HTTP error! Status: ${response.status}`);
						}
						return response.json(); // Parse the response as JSON
					})
					.then(data => {
						console.log(data); // Log the parsed JSON data
						post_out.innerText = data.message; // Access the `message` property
					})
					.catch(err => {
						console.error('Fetch error:', err); // Log the error
						post_out.innerText = String('local error: ' + err); // Display the error
					});
			});
		</script>
	</div>
</body>

</html>
