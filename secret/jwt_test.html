<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<script src='/client_management.js' type='module'></script>
</head>

<body>
	<div>
		<h1>jwt test</h1>
		<div>
			<label>input phrase</label>
			<input id='input' type="text" placeholder='testbarktest' style='width:80%'>
			<button id="test">test jwt</button>
		</div>
		<div>
			<label>medium</label>
			<code id='jwt_placeholder'></code>
		</div>
		<div>
			<label>output</label>
			<code id='jwt_output'></code>
		</div>
		<script type="module">
			function GEBI(string) {return (document.getElementById(string))}

			const input = GEBI('input');
			const test_btn = GEBI('test');
			const jwt_ph = GEBI('jwt_placeholder');
			const out = GEBI('jwt_output');
			const test_key = '1234abcd';

			import JWT from "/lib/jwt.js";
			const jwt = new JWT;

			//run time
			test_btn.addEventListener('click', (e) => {
				let str = input.value;
				if (str == '') {
					console.log('no input value, using placeholder');
					str = input.placeholder;
				}
				else {str = input.value;}

				let new_str;

				new_str = jwt.XorIntArr(str);
				new_str = String(new_str.join(''));
				console.log(new_str);
				jwt_ph.innerText = new_str;

				new_str = jwt.XorIntArr(new_str);
				new_str = String(new_str.join(''));

				out.innerText = new_str;;
			});

		</script>
	</div>
</body>

</html>
